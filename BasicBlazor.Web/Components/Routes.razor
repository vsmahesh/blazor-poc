@using BasicBlazor.Web.Extensions
@using BasicBlazor.Data.Extensions
@using System.Reflection

<Router AppAssembly="typeof(Program).Assembly"
        AdditionalAssemblies="@_additionalAssemblies"
        NotFoundPage="typeof(Pages.NotFound)">
    <Found Context="routeData">
        <RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
        <FocusOnNavigate RouteData="routeData" Selector="h1" />
    </Found>
</Router>

@code {
    [Inject] private ExtensionLoader ExtensionLoader { get; set; } = default!;

    private Assembly[] _additionalAssemblies = Array.Empty<Assembly>();

    protected override void OnInitialized()
    {
        if (ExtensionLoader.ActiveExtension != null)
        {
            _additionalAssemblies = new[] { ExtensionLoader.ActiveExtension.ComponentAssembly };
        }
    }
}
